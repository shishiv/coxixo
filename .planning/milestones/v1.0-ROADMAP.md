# Milestone v1.0: MVP

**Status:** SHIPPED 2026-01-19
**Phases:** 1-4
**Total Plans:** 9

## Overview

Coxixo delivers frictionless voice-to-clipboard transcription in four phases. We start with the application shell and hotkey detection, add audio capture, connect the Azure transcription loop, then polish with visual identity and settings. By Phase 3 completion, the core value ("hold, speak, release, paste") is fully functional.

## Phases

### Phase 1: Foundation

**Goal**: Establish the application shell with system tray presence and working push-to-talk hotkey detection
**Depends on**: Nothing (first phase)
**Plans**: 3 plans

Plans:
- [x] 01-01: Create .NET 8 WinForms project with system tray shell using ApplicationContext pattern
- [x] 01-02: Implement global hotkey detection with low-level keyboard hook for push-to-talk
- [x] 01-03: Add configuration persistence (JSON settings) and secure credential storage (DPAPI)

**Details:**
- Used ApplicationContext pattern for formless tray app
- Global mutex prevents multiple instances (`Global\CoxixoSingleInstance`)
- WH_KEYBOARD_LL for global keyboard hook captures both keydown and keyup
- Auto-repeat prevention via `_isKeyDown` state tracking
- Settings stored in `%LOCALAPPDATA%\Coxixo\` with DPAPI encryption for credentials

### Phase 2: Audio Pipeline

**Goal**: Capture audio from default microphone into a memory buffer during push-to-talk
**Depends on**: Phase 1
**Plans**: 2 plans

Plans:
- [x] 02-01: NAudio microphone capture with 16kHz mono WAV encoding and minimum duration threshold
- [x] 02-02: Audio feedback beeps (walkie-talkie chirps) for recording start/stop

**Details:**
- WaveInEvent for background app compatibility (handles own message loop)
- 16kHz/16-bit/mono WAV format optimized for Whisper API
- 500ms minimum duration threshold filters accidental taps
- Ascending chirp (800->1200 Hz) for start, descending (1200->800 Hz) for stop
- Silent discard for short recordings (no stop beep)

### Phase 3: Transcription Loop

**Goal**: Complete the core value loop - send audio to Azure, receive transcription, copy to clipboard
**Depends on**: Phase 2
**Plans**: 2 plans

Plans:
- [x] 03-01: Azure Whisper API client with TranscriptionService and retry logic
- [x] 03-02: Wire transcription into hotkey flow with clipboard output and error handling

**Details:**
- Azure.AI.OpenAI SDK 2.1.0 for Whisper API integration
- Exponential backoff retry for transient errors (5xx, 429, 408)
- Portuguese language hardcoded (`Language = "pt"`)
- Lazy TranscriptionService initialization (only when credentials valid)
- Status-specific error messages (401, 403, 404, 429, 5xx)

### Phase 4: Polish

**Goal**: Apply brand visual identity, build settings UI, refine user experience
**Depends on**: Phase 3
**Plans**: 2 plans

Plans:
- [x] 04-01: Brand visual identity (tray icons with animation)
- [x] 04-02: Settings UI with dark theme and hotkey customization

**Details:**
- 3-bar sound wave tray icons matching brand guide
- Gray (#C8C8C8) for idle, red for recording with 500ms pulse animation
- Green dot bottom-right (idle), red dot top-right (recording)
- Dark theme settings form (#1E1E1E background, Segoe UI)
- Focus-based hotkey capture with ProcessCmdKey override
- HTTP deployments endpoint test for connection status

---

## Milestone Summary

**Key Decisions:**

| Decision | Rationale | Outcome |
|----------|-----------|---------|
| Azure OpenAI over local Whisper | User has Azure deployment, keeps app lightweight | Good |
| Push-to-talk over toggle | More intuitive for quick input | Good |
| Clipboard over file save | Minimal friction, fits voice-to-paste workflow | Good |
| ApplicationContext pattern | Formless tray app without hidden window | Good |
| WH_KEYBOARD_LL hook | Captures both press and release globally | Good |
| DPAPI with custom entropy | Secure credential storage without external deps | Good |
| WaveInEvent over WaveIn | Better for background apps | Good |
| 500ms minimum duration | Filters accidental taps | Good |
| Programmatic beep generation | Precise frequencies, no external audio files | Good |
| Instance service pattern | TranscriptionService holds SDK clients needing disposal | Good |
| Lazy service initialization | Only create when credentials valid | Good |
| ProcessCmdKey override | Capture Tab, F-keys in hotkey picker | Good |

**Issues Resolved:**

- NuGet source configuration (added nuget.org source)
- MmResult enum mismatch (NotEnabled instead of Allocated)
- Entry point conflict with IconGenerator (added StartupObject)

**Issues Deferred (v1.1):**

- Hotkey modifier support (Ctrl+X, Shift+Y combinations)
- Microphone selection (currently uses default)
- Language selection (currently Portuguese only)
- Windows startup option

**Technical Debt:**

- IconGenerator.cs included in project (could be separate tool)

---

*For current project status, see .planning/MILESTONES.md*

---
*Archived: 2026-01-19 as part of v1.0 milestone completion*
